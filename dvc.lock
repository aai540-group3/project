schema: '2.0'
stages:
  ingest:
    cmd: python src/data/ingestion.py
    deps:
    - path: src/data/ingestion.py
      hash: md5
      md5: 6d7c677bdff8b91d405a386c86542326
      size: 1911
    params:
      params.yaml:
        dataset.name: aai540-group3/diabetes-readmission
        dataset.path.raw: data/raw
    outs:
    - path: data/raw/data.csv
      hash: md5
      md5: dbfe12c203805ccf7fdb683042c46ab3
      size: 49159045
  clean:
    cmd: python src/data/cleaning.py
    deps:
    - path: data/raw/data.csv
      hash: md5
      md5: dbfe12c203805ccf7fdb683042c46ab3
      size: 49159045
    - path: src/data/cleaning.py
      hash: md5
      md5: ed9b8e9c832068fb75ea86ef7dfe1dba
      size: 3843
    params:
      params.yaml:
        dataset.path.interim: data/interim
        dataset.path.raw: data/raw
    outs:
    - path: data/interim/data.csv
      hash: md5
      md5: f1d6c377d981e8ba3a9f92775ecb85d6
      size: 70117495
  split:
    cmd: python src/data/splitting.py
    deps:
    - path: data/interim/data.csv
      hash: md5
      md5: f1d6c377d981e8ba3a9f92775ecb85d6
      size: 70117495
    - path: src/data/splitting.py
      hash: md5
      md5: 3d1b6fb3fffafc848329e559b6f6a6c6
      size: 3384
    params:
      params.yaml:
        dataset.path.interim: data/interim
        dataset.path.processed: data/processed
        training.split:
          test_size: 0.2
          random_state: 42
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: cfd9fd8441b890900bee61eaaf60a7d8
      size: 14026237
    - path: data/processed/train.csv
      hash: md5
      md5: 63f4b9c70d6b7d30d4fa2aa564d9205d
      size: 56094172
  train:
    cmd: python src/models/model1/train.py
    deps:
    - path: data/processed/train_preprocessed.csv
      hash: md5
      md5: 29f2a2819fc232dc5595ada12e3eec84
      size: 83829868
    - path: src/models/model1/train.py
      hash: md5
      md5: 8f1f0033de4b02518d4dffb2372a32d3
      size: 2328
    params:
      params.yaml:
        model.name: LogisticRegression
        training.split.test_size: 0.2
    outs:
    - path: dvclive/plots/metrics/cv_accuracy.tsv
      hash: md5
      md5: 4d0bc13cde2eb70acf1a4df58689bc5a
      size: 38
    - path: dvclive/plots/metrics/training_completed.tsv
      hash: md5
      md5: 6cf80a0d4a0cc84d5c2b34c7d316a663
      size: 28
    - path: models/trained_model.joblib
      hash: md5
      md5: 73d954cd49e321b5c1e84324201798ba
      size: 7589
  evaluate:
    cmd: python src/visualization/evaluation.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: cfd9fd8441b890900bee61eaaf60a7d8
      size: 14026237
    - path: models/trained_model.joblib
      hash: md5
      md5: 73d954cd49e321b5c1e84324201798ba
      size: 7589
    - path: src/visualization/evaluation.py
      hash: md5
      md5: 05d6770406a0fc40d221faa8de86a463
      size: 2516
    outs:
    - path: dvclive_evaluate/plots/metrics/accuracy.tsv
      hash: md5
      md5: a33c947ddbb4d684c1313aa07bb9ced7
      size: 35
    - path: dvclive_evaluate/plots/metrics/precision.tsv
      hash: md5
      md5: f6b04717d3223371bec6fa5e42054a2e
      size: 36
    - path: dvclive_evaluate/plots/metrics/recall.tsv
      hash: md5
      md5: 6c5598ac67fdaca5779f443ca209ad14
      size: 34
    - path: dvclive_evaluate/plots/metrics/roc_auc.tsv
      hash: md5
      md5: e82254312f2488397743c189dfa5db87
      size: 34
  feature_engineering:
    cmd: python src/data/build_features.py
    deps:
    - path: data/interim/data.csv
      hash: md5
      md5: f1d6c377d981e8ba3a9f92775ecb85d6
      size: 70117495
    - path: src/data/build_features.py
      hash: md5
      md5: 2264acfabfce764f832e1e7d3d40a8aa
      size: 4194
    params:
      params.yaml:
        dataset.path.interim: data/interim
        dataset.path.processed: data/processed
        feature_engineering:
          add_polynomial_features: true
          poly_degree: 2
    outs:
    - path: data/processed/data_featured.csv
      hash: md5
      md5: 0c59f6ccd93cd6b47eabd842378f78a8
      size: 72854176
  preprocess:
    cmd: python src/models/model1/preprocessing.py
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: 63f4b9c70d6b7d30d4fa2aa564d9205d
      size: 56094172
    - path: src/models/model1/preprocessing.py
      hash: md5
      md5: e723774e7c5c1241c6ec9431b6a5ad57
      size: 5100
    params:
      params.yaml:
        feature_engineering:
          add_polynomial_features: true
          poly_degree: 2
    outs:
    - path: data/processed/preprocessor.joblib
      hash: md5
      md5: 4dbf446a9dd2d603d2b601887b672e35
      size: 14336
    - path: data/processed/train_preprocessed.csv
      hash: md5
      md5: 29f2a2819fc232dc5595ada12e3eec84
      size: 83829868
  visualize:
    cmd: python src/visualization/visualize.py
    deps:
    - path: reports/metrics/autogluon_metrics.json
      hash: md5
      md5: 7a0f33e5b5e5e227d4eb8963467610a9
      size: 180
    - path: reports/metrics/logistic_regression_metrics.json
      hash: md5
      md5: 27056c2a28d3c8257c52f6e568501261
      size: 180
    - path: src/visualization/visualize.py
      hash: md5
      md5: 08fd134cd212e76908771431c4b9a01b
      size: 2647
    outs:
    - path: reports/figures/model_comparison.png
      hash: md5
      md5: 4ca23c67fc68bfbb85ac65fda387c00f
      size: 20701
  preprocess@logistic_regression:
    cmd: python src/models/logistic_regression/preprocessing.py model=logistic_regression
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: 63f4b9c70d6b7d30d4fa2aa564d9205d
      size: 56094172
    - path: src/models/logistic_regression/preprocessing.py
      hash: md5
      md5: dcceebf8ecb6f42be295c4c209a53db6
      size: 4408
    params:
      params.yaml:
        dataset.path.processed: data/processed
        model.logistic_regression:
          name: logistic_regression
          params:
            penalty: l2
            C: 1.0
            solver: lbfgs
            max_iter: 1000
            random_state: 42
    outs:
    - path: data/processed/logistic_regression/train_preprocessed.csv
      hash: md5
      md5: 83cc48c279024b3327dc1ccebefeb4ba
      size: 47491440
  preprocess@autogluon:
    cmd: python src/models/autogluon/preprocessing.py model=autogluon
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: 63f4b9c70d6b7d30d4fa2aa564d9205d
      size: 56094172
    - path: src/models/autogluon/preprocessing.py
      hash: md5
      md5: 70a96d3c7e6c57d5552b36169323b908
      size: 4991
    params:
      params.yaml:
        dataset.path.processed: data/processed
        model.autogluon:
          name: autogluon
          params:
            presets: best_quality
            eval_metric: accuracy
    outs:
    - path: data/processed/autogluon/train_preprocessed.csv
      hash: md5
      md5: ac24323e785816591d8540a9701ca25c
      size: 47491440
  train@logistic_regression:
    cmd: python src/models/logistic_regression/train.py model=logistic_regression
    deps:
    - path: data/processed/logistic_regression/train_preprocessed.csv
      hash: md5
      md5: 83cc48c279024b3327dc1ccebefeb4ba
      size: 47491440
    - path: src/models/logistic_regression/train.py
      hash: md5
      md5: 8b6aaa200a6ec19d0e9c3a4743de1fff
      size: 5830
    params:
      params.yaml:
        dataset.path.processed: data/processed
        model.logistic_regression:
          name: logistic_regression
          params:
            penalty: l2
            C: 1.0
            solver: lbfgs
            max_iter: 1000
            random_state: 42
    outs:
    - path: models/logistic_regression/model.pkl
      hash: md5
      md5: 0c9a37889dd9174a8c509b206c745702
      size: 6159
  train@autogluon:
    cmd: python src/models/autogluon/train.py model=autogluon
    deps:
    - path: data/processed/autogluon/train_preprocessed.csv
      hash: md5
      md5: ac24323e785816591d8540a9701ca25c
      size: 47491440
    - path: src/models/autogluon/train.py
      hash: md5
      md5: 332364e8015d2edb7538ce0fb53e6e1a
      size: 6460
    params:
      params.yaml:
        dataset.path.processed: data/processed
        model.autogluon:
          name: autogluon
          params:
            presets: best_quality
            eval_metric: accuracy
    outs:
    - path: models/autogluon/model.pkl
      hash: md5
      md5: 5ea031283f2d6c69f43be9d8dea76862
      size: 75423
  evaluate@logistic_regression:
    cmd: python src/models/logistic_regression/evaluate.py model=logistic_regression
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: cfd9fd8441b890900bee61eaaf60a7d8
      size: 14026237
    - path: models/logistic_regression/model.pkl
      hash: md5
      md5: 0c9a37889dd9174a8c509b206c745702
      size: 6159
    - path: src/models/logistic_regression/evaluate.py
      hash: md5
      md5: 5af5047618d55e62bada5e57eb171e77
      size: 8112
    params:
      params.yaml:
        dataset.path.processed: data/processed
        model.logistic_regression:
          name: logistic_regression
          params:
            penalty: l2
            C: 1.0
            solver: lbfgs
            max_iter: 1000
            random_state: 42
    outs:
    - path: reports/metrics/logistic_regression_metrics.json
      hash: md5
      md5: 27056c2a28d3c8257c52f6e568501261
      size: 180
  evaluate@autogluon:
    cmd: python src/models/autogluon/evaluate.py model=autogluon
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: cfd9fd8441b890900bee61eaaf60a7d8
      size: 14026237
    - path: models/autogluon/model.pkl
      hash: md5
      md5: 5ea031283f2d6c69f43be9d8dea76862
      size: 75423
    - path: src/models/autogluon/evaluate.py
      hash: md5
      md5: 8ebe0d0645b3700cb3fdb341dc3ef586
      size: 8687
    params:
      params.yaml:
        dataset.path.processed: data/processed
        model.autogluon:
          name: autogluon
          params:
            presets: best_quality
            eval_metric: accuracy
    outs:
    - path: reports/metrics/autogluon_metrics.json
      hash: md5
      md5: 7a0f33e5b5e5e227d4eb8963467610a9
      size: 180
