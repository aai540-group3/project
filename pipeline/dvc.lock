schema: '2.0'
stages:
  setup:
    cmd:
    - UV_LINK_MODE=copy uv venv .venv --python 3.11
    - .venv/bin/python -m ensurepip --upgrade
    - .venv/bin/python -m pip install -q uv
    - .venv/bin/uv pip install -q -e .
    - .venv/bin/uv pip install -q -r requirements/base.txt
    deps:
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
    outs:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
  infrastruct:
    cmd:
    - export UV_LINK_MODE=copy && uv venv .venv-infrastruct --python 3.11
    - .venv-infrastruct/bin/python -m ensurepip --upgrade
    - .venv-infrastruct/bin/python -m pip install -r requirements/base.txt
    - .venv-infrastruct/bin/python -m pip install -r requirements/infrastruct.txt
    - .venv-infrastruct/bin/python pipeline/stages/pipeline.py infrastruct
    deps:
    - path: pipeline/stages/pipeline.py
      hash: md5
      md5: aac123a10d2cc5ed9aa46a8e6b55dd7d
      size: 29836
    - path: requirements/base.txt
      hash: md5
      md5: d0b790b75f2b4f2cb26f6f7369030fef
      size: 29
    - path: requirements/infrastruct.txt
      hash: md5
      md5: 6686853da3491a56c98917cc5c4ddea2
      size: 5
  preprocess:
    cmd:
    - .venv/bin/uv run python -m pipeline preprocess
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: data/raw/data.csv
      hash: md5
      md5: 33411fa1536aaaadb24c0c1f2a8598b9
      size: 16246860
    - path: pipeline/__init__.py
      hash: md5
      md5: f321818f173e8f62b49da0f746eed582
      size: 273
    - path: pipeline/__main__.py
      hash: md5
      md5: ca86d1d756b43370d3f001ab69dd9cb4
      size: 1374
    - path: pipeline/stages/base.py
      hash: md5
      md5: 9e6f7f1fa082c059e74e29e215b9197b
      size: 9846
      isexec: true
    - path: pipeline/stages/preprocess.py
      hash: md5
      md5: 0bcaba6f4b2a1ee2d49eb0da96e772ca
      size: 12450
      isexec: true
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
    outs:
    - path: data/interim/data.parquet
      hash: md5
      md5: ff7f3f24f1d817188240d403e29f217a
      size: 1645476
    - path: metrics/preprocess/metrics.json
      hash: md5
      md5: bdca97cc7eef30961cd8cdcbbe0806e7
      size: 3727
    - path: plots/preprocess/missing_values.png
      hash: md5
      md5: f82afba20e54cd548d3c2a7e57300fc6
      size: 373073
    - path: plots/preprocess/num_lab_procedures_distribution.png
      hash: md5
      md5: 1c7d60f9318c7a70ca0301afdb722a70
      size: 147380
    - path: plots/preprocess/num_medications_distribution.png
      hash: md5
      md5: 7b4e1c767e48f0c83937b5f7c63d98c7
      size: 122183
    - path: plots/preprocess/num_procedures_distribution.png
      hash: md5
      md5: 2623a784ac38513acc0e70cb4b89a0d3
      size: 109483
    - path: plots/preprocess/number_diagnoses_distribution.png
      hash: md5
      md5: 9e52a4a99d6a3ce3b7e434ec14f56064
      size: 121510
    - path: plots/preprocess/number_emergency_distribution.png
      hash: md5
      md5: ca4784191b4bbd3820b871f4d4810851
      size: 80027
    - path: plots/preprocess/number_inpatient_distribution.png
      hash: md5
      md5: 20be76d86a08e36981ff7a2d95cbc554
      size: 101971
    - path: plots/preprocess/number_outpatient_distribution.png
      hash: md5
      md5: b81b3fbbaf98564eaf47859d9adbdb2a
      size: 75663
    - path: plots/preprocess/readmission_distribution.png
      hash: md5
      md5: 9dd1223fef12107c9390b1b99f9d4791
      size: 73067
    - path: plots/preprocess/time_in_hospital_distribution.png
      hash: md5
      md5: 30035a07746fdc974b6ac9503dad6fdf
      size: 144713
  featurize:
    cmd:
    - .venv/bin/uv run --with boto3 python -m pipeline featurize
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: data/interim/data.parquet
      hash: md5
      md5: ff7f3f24f1d817188240d403e29f217a
      size: 1645476
    - path: pipeline/__init__.py
      hash: md5
      md5: f321818f173e8f62b49da0f746eed582
      size: 273
    - path: pipeline/__main__.py
      hash: md5
      md5: ca86d1d756b43370d3f001ab69dd9cb4
      size: 1374
    - path: pipeline/stages/base.py
      hash: md5
      md5: 9e6f7f1fa082c059e74e29e215b9197b
      size: 9846
      isexec: true
    - path: pipeline/stages/featurize.py
      hash: md5
      md5: fd8bfc403b4fa07e3abe522d9b7f3a7c
      size: 15413
      isexec: true
    outs:
    - path: data/processed/features.parquet
      hash: md5
      md5: 496c907119330ae4232f7b6237fce100
      size: 565552
    - path: data/processed/features_not_onehot.parquet
      hash: md5
      md5: 1b14321b5c868684f9af0b7b6bfd99af
      size: 1808900
    - path: metrics/featurize/metrics.json
      hash: md5
      md5: c164f40037a23874b1a972dfa91781a0
      size: 1762
    - path: metrics/featurize/statistics.json
      hash: md5
      md5: 7b1833b7e2e8302fc10c8243a0760600
      size: 3145
    - path: plots/featurize/age_distribution.png
      hash: md5
      md5: ecb61608068911312d0a29551931b646
      size: 70875
    - path: plots/featurize/age_number_diagnoses_distribution.png
      hash: md5
      md5: 62bd18f2ead969eea516ed8ba6679ccf
      size: 97608
    - path: plots/featurize/change_num_med_distribution.png
      hash: md5
      md5: 9d1436eedcca54d175264a30cb2877d5
      size: 87459
    - path: plots/featurize/feature_correlations.png
      hash: md5
      md5: a37550959d89276b0907aafb204f0a6f
      size: 688663
    - path: plots/featurize/feature_importance.csv
      hash: md5
      md5: 5aabfc05aeab4460ed530e34b19041af
      size: 768
    - path: plots/featurize/feature_importance.png
      hash: md5
      md5: f1f9ec4959cbed9f8b0814b219be1be9
      size: 229338
    - path: plots/featurize/num_change_distribution.png
      hash: md5
      md5: f3426ebd169e0797c82039c0c9ceaa35
      size: 80255
    - path: plots/featurize/num_med_distribution.png
      hash: md5
      md5: 4f1e66d9ff505cd1eea71f6faee0423a
      size: 75400
    - path: plots/featurize/num_med_num_change_distribution.png
      hash: md5
      md5: d613db39336dbec5b3f25a7ea3b5300e
      size: 88412
    - path: plots/featurize/num_med_num_lab_procedures_distribution.png
      hash: md5
      md5: eac7316bb0af2bbb138239c5cb97cb50
      size: 95769
    - path: plots/featurize/num_med_num_procedures_distribution.png
      hash: md5
      md5: 89d2db6c80c996707ccc8ec9aa877fe1
      size: 94044
    - path: plots/featurize/num_med_number_diagnoses_distribution.png
      hash: md5
      md5: 9ba3101037c580359bded1b066db42da
      size: 97332
    - path: plots/featurize/num_med_time_in_hospital_distribution.png
      hash: md5
      md5: 734000da899860638bc5b56bcaf2ed52
      size: 91563
    - path: plots/featurize/num_procedures_distribution.png
      hash: md5
      md5: d16b863816f26001a0571a45b82147fb
      size: 120130
    - path: plots/featurize/number_diagnoses_time_in_hospital_distribution.png
      hash: md5
      md5: f1fba905cd8961b95f7c9b6f93dda718
      size: 182587
    - path: plots/featurize/readmission_distribution.png
      hash: md5
      md5: 3e2f769e4b4b3a62ce181156cbdb6e56
      size: 75634
    - path: plots/featurize/service_utilization_distribution.png
      hash: md5
      md5: a4e9cd27939adda8e6ba985de1013e02
      size: 114263
    - path: plots/featurize/time_in_hospital_distribution.png
      hash: md5
      md5: 3d2871716bf1e998d4b910d6bee8d8d1
      size: 158298
    - path: plots/featurize/time_in_hospital_num_lab_procedures_distribution.png
      hash: md5
      md5: 1501dcbb757c40cf673223b7eb785446
      size: 154066
  explore:
    cmd:
    - .venv/bin/uv run python -m pipeline explore
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: data/interim/data.parquet
      hash: md5
      md5: ff7f3f24f1d817188240d403e29f217a
      size: 1645476
    - path: pipeline/__init__.py
      hash: md5
      md5: f321818f173e8f62b49da0f746eed582
      size: 273
    - path: pipeline/__main__.py
      hash: md5
      md5: ca86d1d756b43370d3f001ab69dd9cb4
      size: 1374
    - path: pipeline/stages/base.py
      hash: md5
      md5: 9e6f7f1fa082c059e74e29e215b9197b
      size: 9846
      isexec: true
    - path: pipeline/stages/explore.py
      hash: md5
      md5: a8806244f04e4b7d5fb2e30735a10436
      size: 14816
      isexec: true
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
    outs:
    - path: metrics/explore/metrics.json
      hash: md5
      md5: 8d6f4361d2f65f2526e0ef1cffba7499
      size: 20870
    - path: plots/explore/clinical_metrics_boxplot.png
      hash: md5
      md5: b580ee76fd44f13bfe48115de02655d9
      size: 151666
    - path: plots/explore/clinical_numeric_correlation_heatmap.png
      hash: md5
      md5: 0f839c80c23092dffe1c44ef9599867a
      size: 204159
    - path: plots/explore/correlation_matrix_heatmap.png
      hash: md5
      md5: e417ab5cfc1968a490afab50e2269b11
      size: 1129761
    - path: plots/explore/demographic_numeric_correlation_heatmap.png
      hash: md5
      md5: 88da9bb065d3775dcf275dd68a63236e
      size: 76422
    - path: plots/explore/demographics_age_distribution.png
      hash: md5
      md5: 38d85518827d203338f313b202c4de99
      size: 230438
    - path: plots/explore/diagnosis_numeric_correlation_heatmap.png
      hash: md5
      md5: 49a304eb0393dade273748d200ced980
      size: 268011
    - path: plots/explore/feature_importance.csv
      hash: md5
      md5: 299acbfcf4fe1dacacc456fed62de8f9
      size: 1172
    - path: plots/explore/feature_importance.png
      hash: md5
      md5: ecd54811c2e0c7dc6b1388c9fd535511
      size: 191053
    - path: plots/explore/lab_results_distribution.png
      hash: md5
      md5: 45993a82df19b704c8eea2a55f680f39
      size: 136160
    - path: plots/explore/labs_numeric_correlation_heatmap.png
      hash: md5
      md5: c6032c385ce8ab7f97e1b0c6ab8cd3fe
      size: 78112
    - path: plots/explore/medications_numeric_correlation_heatmap.png
      hash: md5
      md5: ce8776339501ea154f1c7b23a2c0cbfa
      size: 179341
    - path: plots/explore/race_chi_square.png
      hash: md5
      md5: a808cecdf8363e30adac403e09058072
      size: 118810
    - path: plots/explore/race_distribution.png
      hash: md5
      md5: 6aee157818b25ace285b82d4627c3c01
      size: 124706
    - path: plots/explore/service_numeric_correlation_heatmap.png
      hash: md5
      md5: a98dfdddc021b361a2c8f1b84f0a53e1
      size: 114164
    - path: plots/explore/service_utilization_distribution.png
      hash: md5
      md5: edf26e8bf122839180167ed37f2d9db2
      size: 234852
  ingest_parquet:
    cmd: .venv/bin/python src/ingest.py
    deps:
    - path: requirements-frozen.txt
      hash: md5
      md5: 495bf7a4ad0fc161c91a663531b153ca
      size: 8410
    - path: src/ingest.py
      hash: md5
      md5: 4834dee50d39bc8738573b1d25632ce3
      size: 2691
    outs:
    - path: data/raw/data.parquet
      hash: md5
      md5: 70194fd7340a638e7a98b5d5a2a99ed6
      size: 1419892
  ingest_csv:
    cmd: .venv/bin/python src/ingest.py
    deps:
    - path: requirements-frozen.txt
      hash: md5
      md5: 495bf7a4ad0fc161c91a663531b153ca
      size: 8410
    - path: src/ingest.py
      hash: md5
      md5: 4834dee50d39bc8738573b1d25632ce3
      size: 2691
    outs:
    - path: data/raw/data.csv
      hash: md5
      md5: 33411fa1536aaaadb24c0c1f2a8598b9
      size: 16246860
    - path: data/raw/metadata.json
      hash: md5
      md5: eb8bd36c2cc7a6284a657c63561e0225
      size: 5125
    - path: data/raw/variables.json
      hash: md5
      md5: c03764d3560b025c3f1291d585517221
      size: 19001
  ingest:
    cmd:
    - export UV_LINK_MODE=copy && uv venv .venv-ingest --python 3.11
    - . .venv-ingest/bin/activate && export UV_LINK_MODE=copy && uv pip install -q
      -r requirements/base.txt
    - . .venv-ingest/bin/activate && export UV_LINK_MODE=copy && uv pip install -q
      -r requirements/ingest.txt
    - . .venv-ingest/bin/activate && .venv-ingest/bin/python pipeline/stages/pipeline.py
      ingest
    deps:
    - path: pipeline/stages/pipeline.py
      hash: md5
      md5: 490f6c30d803c28caf0b64a7ffc736e0
      size: 29801
    - path: requirements/base.txt
      hash: md5
      md5: 2be83abc64566c11a9a43706e447a135
      size: 96
    - path: requirements/ingest.txt
      hash: md5
      md5: 910eb7c3ae1b69bd49c676e000caff28
      size: 87
    outs:
    - path: data/raw/data.csv
      hash: md5
      md5: 33411fa1536aaaadb24c0c1f2a8598b9
      size: 16246860
    - path: data/raw/data.parquet
      hash: md5
      md5: 715fc5c0f345a1e7efc9136c4c5da15a
      size: 1419892
    - path: data/raw/metadata.json
      hash: md5
      md5: eb8bd36c2cc7a6284a657c63561e0225
      size: 5125
    - path: data/raw/variables.json
      hash: md5
      md5: c03764d3560b025c3f1291d585517221
      size: 19001
  train_logistic_regression:
    cmd: .venv/bin/python models/logistic_regression/model.py
    deps:
    - path: data/interim/data_featured.parquet
      hash: md5
      md5: bcfcb4257ebc5523176cabc88c2278c3
      size: 4971381
    - path: models/logistic_regression/model.py
      hash: md5
      md5: df7d5793fa43b6d64227fb82088ddd52
      size: 18556
    - path: requirements-frozen.txt
      hash: md5
      md5: 495bf7a4ad0fc161c91a663531b153ca
      size: 8410
  train_autogluon:
    cmd:
    - uv venv .venv-autogluon --python 3.10
    - . .venv-autogluon/bin/activate && uv pip install -r requirements-autogluon.txt
    - . .venv-autogluon/bin/activate && uv pip freeze > requirements-autogluon-frozen.txt
    - . .venv-autogluon/bin/activate && python src/utils.py patch_nvidia_gpu
    - . .venv-autogluon/bin/activate && PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python
      python models/autogluon/model.py
    - echo "done" > .markers/train_autogluon.done
    deps:
    - path: .markers/featurize.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: data/interim/data_featured.parquet
      hash: md5
      md5: f508abc6a720c94f159db3c2139edc8d
      size: 5210972
    - path: models/autogluon/model.py
      hash: md5
      md5: 3fa0cdcd5b25b81a3449b7d93bfb0e25
      size: 16487
    - path: requirements-autogluon.txt
      hash: md5
      md5: 2a3814eba1bc90e700e781a357c06ede
      size: 106
    outs:
    - path: .markers/train_autogluon.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: .venv-autogluon
      hash: md5
      md5: 2915eff68d524cad9276ebfdd895e87d.dir
      size: 3861441890
      nfiles: 68274
    - path: models/autogluon/artifacts/metrics/metrics.json
      hash: md5
      md5: 6cedbbb5a3bd24b170f72ce5d12d8b21
      size: 191
    - path: models/autogluon/artifacts/model
      hash: md5
      md5: 39ebe9123168d9caaadccb2f6a01d1f3.dir
      size: 51178
      nfiles: 10
    - path: models/autogluon/artifacts/plots/confusion_matrix.png
      hash: md5
      md5: 42c10c96deee8111d7bc4085a7a688e0
      size: 109307
    - path: models/autogluon/artifacts/plots/feature_importance.png
      hash: md5
      md5: 473d4d6b2c41b1c2748b0da4584f8460
      size: 243218
    - path: models/autogluon/artifacts/plots/roc_curve.png
      hash: md5
      md5: 99fe191ccfdccddaf4eb5c0f0a56c965
      size: 176597
    - path: requirements-autogluon-frozen.txt
      hash: md5
      md5: e25a2283fa294501c4fdf876ff374386
      size: 6053
  train_neural_network:
    cmd: .venv/bin/python models/neural_network/model.py
    deps:
    - path: data/interim/data_featured.parquet
      hash: md5
      md5: bcfcb4257ebc5523176cabc88c2278c3
      size: 4971381
    - path: models/neural_network/model.py
      hash: md5
      md5: e0dab3b3599ff9845ddc32e38cfed965
      size: 20372
    - path: requirements-frozen.txt
      hash: md5
      md5: 495bf7a4ad0fc161c91a663531b153ca
      size: 8410
  train_logisticregression:
    cmd:
    - uv venv .venv-logisticregression --python 3.10
    - . .venv-logisticregression/bin/activate && uv pip install -r requirements-logisticregression.txt
    - . .venv-logisticregression/bin/activate && uv pip freeze > requirements-logisticregression-frozen.txt
    - . .venv-logisticregression/bin/activate && python models/logistic_regression/model.py
    - echo "done" > .markers/train_logisticregression.done
    deps:
    - path: .markers/featurize.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: data/interim/data_featured.parquet
      hash: md5
      md5: f508abc6a720c94f159db3c2139edc8d
      size: 5210972
    - path: models/logistic_regression/model.py
      hash: md5
      md5: 5eea513d8e6f3d9259eaf5b6165b64d5
      size: 17931
    - path: requirements-logisticregression.txt
      hash: md5
      md5: 51f39049342d2ccec98f0f9868bbc68b
      size: 84
    outs:
    - path: .markers/train_logisticregression.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: .venv-logisticregression
      hash: md5
      md5: 39f0ed7ad079450a8f9811f7bec12dbc.dir
      size: 421952179
      nfiles: 18184
    - path: models/logistic_regression/artifacts/metrics/metrics.json
      hash: md5
      md5: f3624ca6827354fb4780c2c9a68943c7
      size: 480
    - path: models/logistic_regression/artifacts/model
      hash: md5
      md5: d3b9cfb88049175b27571e4066330317.dir
      size: 7508
      nfiles: 4
    - path: models/logistic_regression/artifacts/plots/confusion_matrix.png
      hash: md5
      md5: 504baef6eb2985cbb406d6423bdbcbd9
      size: 108136
    - path: models/logistic_regression/artifacts/plots/roc_curve.png
      hash: md5
      md5: b051a4c39f14e5681a1ec01e251aef80
      size: 195054
    - path: requirements-logisticregression-frozen.txt
      hash: md5
      md5: be5c30cefe795fc8ed72d1fdac85a1bf
      size: 3449
  train_neuralnetwork:
    cmd:
    - uv venv .venv-neuralnetwork --python 3.10
    - . .venv-neuralnetwork/bin/activate && uv pip install -r requirements-neuralnetwork.txt
    - . .venv-neuralnetwork/bin/activate && uv pip freeze > requirements-neuralnetwork-frozen.txt
    - . .venv-neuralnetwork/bin/activate && python models/neural_network/model.py
    - echo "done" > .markers/train_neuralnetwork.done
    deps:
    - path: .markers/featurize.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: data/interim/data_featured.parquet
      hash: md5
      md5: f508abc6a720c94f159db3c2139edc8d
      size: 5210972
    - path: models/neural_network/model.py
      hash: md5
      md5: ac075ff4de3e3a3a71e7fb50a2511b3c
      size: 20373
    - path: requirements-neuralnetwork.txt
      hash: md5
      md5: 4df5a9fd8258b79c4c9af987eafd5007
      size: 99
    outs:
    - path: .markers/train_neuralnetwork.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: .venv-neuralnetwork
      hash: md5
      md5: 0266dda7a6777fc216cc5f1c2f512565.dir
      size: 1979320370
      nfiles: 35636
    - path: models/neural_network/artifacts/metrics/metrics.json
      hash: md5
      md5: 7345181225c2969b3d7f43296a6259f1
      size: 756
    - path: models/neural_network/artifacts/model
      hash: md5
      md5: cf5f5f81aae123e5195a08531ebb3339.dir
      size: 131997
      nfiles: 4
    - path: models/neural_network/artifacts/plots/confusion_matrix.png
      hash: md5
      md5: 910f2c4adc742230a05af102dfd8b804
      size: 109270
    - path: models/neural_network/artifacts/plots/model_architecture.png
      hash: md5
      md5: 03cd8da41577c10e36416a2a9c4c9dec
      size: 220369
    - path: models/neural_network/artifacts/plots/roc_curve.png
      hash: md5
      md5: 0b305509f53aa6c199bebe291b57f770
      size: 199723
    - path: requirements-neuralnetwork-frozen.txt
      hash: md5
      md5: b16d8ab17bb28065eee0b78277a1cc97
      size: 3825
  deploy:
    cmd:
    - uv venv .venv-deploy --python 3.10
    - . .venv-deploy/bin/activate && uv pip install -r requirements-deploy.txt
    - . .venv-deploy/bin/activate && uv pip freeze > requirements-deploy-frozen.txt
    - . .venv-deploy/bin/activate && python src/deploy.py
    - echo "done" > .markers/deploy.done
    deps:
    - path: .markers/train_autogluon.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: .markers/train_logisticregression.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: .markers/train_neuralnetwork.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: models/autogluon/artifacts/metrics/metrics.json
      hash: md5
      md5: 6cedbbb5a3bd24b170f72ce5d12d8b21
      size: 191
    - path: models/autogluon/artifacts/model/feature_importance.csv
      hash: md5
      md5: 1b93b41477957f69e27b758b8bb029a4
      size: 4499
    - path: models/autogluon/artifacts/model/predictor.pkl
      hash: md5
      md5: 4ab5049f6ea274bdfcb4657386a6fd74
      size: 498
    - path: models/logistic_regression/artifacts/metrics/metrics.json
      hash: md5
      md5: f3624ca6827354fb4780c2c9a68943c7
      size: 480
    - path: models/logistic_regression/artifacts/model/model.joblib
      hash: md5
      md5: f33f24d5505d2b3409e5f6d235cdf246
      size: 1631
    - path: models/neural_network/artifacts/metrics/metrics.json
      hash: md5
      md5: 7345181225c2969b3d7f43296a6259f1
      size: 756
    - path: models/neural_network/artifacts/model/model.keras
      hash: md5
      md5: dbebfc74bc94ff7776c4ab645dc1610a
      size: 122759
    - path: src/deploy.py
      hash: md5
      md5: 6c63a3fe9d32237a68c7270cf4113f48
      size: 23333
    outs:
    - path: .markers/deploy.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: huggingface/models/diabetes-readmission
      hash: md5
      md5: 023b04defd929b51c240902cfb8ae7d0.dir
      size: 1631549
      nfiles: 38
    - path: requirements-deploy-frozen.txt
      hash: md5
      md5: 67e6872012e8def4945da48dfe1198f8
      size: 3598
  build:
    cmd:
    - export UV_LINK_MODE=copy && uv venv .venv-build --python 3.11
    - . .venv-build/bin/activate && export UV_LINK_MODE=copy && uv pip install -r
      requirements/base.txt
    - . .venv-build/bin/activate && export UV_LINK_MODE=copy && uv pip install -r
      requirements/build.txt
    - . .venv-build/bin/activate && python pipeline/stages/build.py
    deps:
    - path: docker/Dockerfile.autogluon
      hash: md5
      md5: 2ed86a39d0b0c1a490830fd855577e99
      size: 481
    - path: docker/Dockerfile.base
      hash: md5
      md5: 0c134b528118d36c4f34272364755f71
      size: 1634
    - path: docker/Dockerfile.deploy
      hash: md5
      md5: 56b6458b8e30cc229d82ec5f8b03eeb7
      size: 424
    - path: docker/Dockerfile.evaluate
      hash: md5
      md5: 538fc2af111021fb283261e92859b490
      size: 385
    - path: docker/Dockerfile.explore
      hash: md5
      md5: de6e8fbabd6477cd46776711d0cf73a0
      size: 378
    - path: docker/Dockerfile.featurize
      hash: md5
      md5: 3138e972ac108d3184090a013fd4c165
      size: 396
    - path: docker/Dockerfile.infrastruct
      hash: md5
      md5: 2d3d2670983afc3523cf452cda5c185e
      size: 323
    - path: docker/Dockerfile.ingest
      hash: md5
      md5: 2d15b5c7c668e4507dc3d61cfe69aef7
      size: 436
    - path: docker/Dockerfile.logisticregression
      hash: md5
      md5: fe117de244698551e90a444a57dc6bd5
      size: 376
    - path: docker/Dockerfile.neuralnetwork
      hash: md5
      md5: 078f56f5566dd13c5dcc226944fc9bcb
      size: 378
    - path: docker/Dockerfile.optimize
      hash: md5
      md5: 50dfbf51cd932cc9c7a94fbbe68277f9
      size: 441
    - path: docker/Dockerfile.preprocess
      hash: md5
      md5: 61c0949d86dd84d37586b0a6b8679dac
      size: 448
    - path: docker/Dockerfile.register
      hash: md5
      md5: 8005d4554d9164eb2a52ff8210221a27
      size: 346
    - path: docker/Dockerfile.serve
      hash: md5
      md5: dd4a523f7f26d415e4e3db1afeedeb16
      size: 453
    - path: pipeline/conf/config.yaml
      hash: md5
      md5: c1ffe24f384c66a699a55e5861bb3a98
      size: 27932
    - path: pipeline/stages/build.py
      hash: md5
      md5: b70d97c1bceb3a5371500403cb5937af
      size: 8061
      isexec: true
    - path: requirements/base.txt
      hash: md5
      md5: 7808903344d4b446fea79d71e4547c58
      size: 83
    - path: requirements/build.txt
      hash: md5
      md5: 05b6053c41a2130afd6fc3b158bda4e6
      size: 6
  prepare:
    cmd:
    - .venv/bin/uv run --with boto3 python -m pipeline infrastruct
    - .venv/bin/uv run --with ucimlrepo --with pyarrow python -m pipeline ingest
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: pipeline/__init__.py
      hash: md5
      md5: f321818f173e8f62b49da0f746eed582
      size: 273
    - path: pipeline/__main__.py
      hash: md5
      md5: ca86d1d756b43370d3f001ab69dd9cb4
      size: 1374
    - path: pipeline/stages/base.py
      hash: md5
      md5: 9e6f7f1fa082c059e74e29e215b9197b
      size: 9846
      isexec: true
    - path: pipeline/stages/infrastruct.py
      hash: md5
      md5: 497801250338e5b51102447a11d348bd
      size: 1510
      isexec: true
    - path: pipeline/stages/ingest.py
      hash: md5
      md5: b14e053c79cfcff37b3d73e2546230bc
      size: 3752
      isexec: true
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
    outs:
    - path: data/raw/data.csv
      hash: md5
      md5: 33411fa1536aaaadb24c0c1f2a8598b9
      size: 16246860
    - path: data/raw/data.parquet
      hash: md5
      md5: 80180ca21b2e0a18573675cdb3f741de
      size: 1415409
    - path: data/raw/metadata.json
      hash: md5
      md5: c8df8414d7743e8e95d42b91ef1402d3
      size: 4903
    - path: data/raw/variables.json
      hash: md5
      md5: af3722d3a8b6db1015406123b06cd79d
      size: 17401
    - path: metrics/ingest/metrics.json
      hash: md5
      md5: e2b7a23cd537f184f3b6938a7620c2e6
      size: 4599
    - path: plots/ingest/data_types.png
      hash: md5
      md5: 59bf118f0275aab5d38165c990113a89
      size: 68878
    - path: plots/ingest/missing_values.png
      hash: md5
      md5: a38c7d4ba819c39df160ee25f03910cd
      size: 237802
  feast:
    cmd:
    - docker stop $(docker ps -a -q --filter publish=5432)  &>/dev/null || true
    - .venv/bin/uv run --with psycopg2-binary --with feast[postgres] --with dask[dataframe]
      python -m pipeline feast
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: data/processed/features.parquet
      hash: md5
      md5: 496c907119330ae4232f7b6237fce100
      size: 565552
    - path: data/processed/features_not_onehot.parquet
      hash: md5
      md5: 1b14321b5c868684f9af0b7b6bfd99af
      size: 1808900
    - path: pipeline/stages/base.py
      hash: md5
      md5: 9e6f7f1fa082c059e74e29e215b9197b
      size: 9846
      isexec: true
    - path: pipeline/stages/feast.py
      hash: md5
      md5: 48994365a064067df7ea0186a5c99733
      size: 27215
    - path: pipeline/stages/feature_repo.py
      hash: md5
      md5: 19f7b4ac95cb2c3da009ecfc3061256d
      size: 6522
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
  autogluon:
    cmd:
    - .venv/bin/uv run --with autogluon.tabular[lightgbm] --with dvclive python pipeline
      autogluon
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: data/processed/features.parquet
      hash: md5
      md5: 0c781e5309ec1e0b47b93b9f915577cf
      size: 1028452
    - path: pipeline/__main__.py
      hash: md5
      md5: c8db56e7c06df77d7e14d2bba0a2e804
      size: 1414
    - path: requirements.txt
      hash: md5
      md5: de5227a0beeaf96e4f95c6672a0ee8e4
      size: 2202
    outs:
    - path: metrics/autogluon/feature_importance.csv
      hash: md5
      md5: e8bf5de2b4b707d98ebc3cf854313880
      size: 3723
    - path: metrics/autogluon/metrics.json
      hash: md5
      md5: cdf3f3f0d7f705043a3ec8faba8bd372
      size: 164
    - path: models/autogluon
      hash: md5
      md5: 97b4cb62dd5e2845c3aee6ea32385d46.dir
      size: 11678090
      nfiles: 14
    - path: plots/autogluon/confusion_matrix.png
      hash: md5
      md5: 3fe852261c9e1e9afcf9097f792359c1
      size: 116224
    - path: plots/autogluon/feature_importance.png
      hash: md5
      md5: 0b07d18e833380069d7d6b70672cff76
      size: 265039
    - path: plots/autogluon/roc_curve.png
      hash: md5
      md5: f0e572877e236dbd836f0d2ba9a06b2e
      size: 173801
