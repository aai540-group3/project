schema: '2.0'
stages:
  setup:
    cmd:
    - UV_LINK_MODE=copy uv venv .venv --python 3.11
    - .venv/bin/python -m ensurepip --upgrade
    - .venv/bin/python -m pip install -q uv
    - .venv/bin/uv pip install -q -e .
    - .venv/bin/uv pip install -q -r requirements/base.txt
    deps:
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
    outs:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
  infrastruct:
    cmd:
    - export UV_LINK_MODE=copy && uv venv .venv-infrastruct --python 3.11
    - .venv-infrastruct/bin/python -m ensurepip --upgrade
    - .venv-infrastruct/bin/python -m pip install -r requirements/base.txt
    - .venv-infrastruct/bin/python -m pip install -r requirements/infrastruct.txt
    - .venv-infrastruct/bin/python pipeline/stages/pipeline.py infrastruct
    deps:
    - path: pipeline/stages/pipeline.py
      hash: md5
      md5: aac123a10d2cc5ed9aa46a8e6b55dd7d
      size: 29836
    - path: requirements/base.txt
      hash: md5
      md5: d0b790b75f2b4f2cb26f6f7369030fef
      size: 29
    - path: requirements/infrastruct.txt
      hash: md5
      md5: 6686853da3491a56c98917cc5c4ddea2
      size: 5
  preprocess:
    cmd:
    - .venv/bin/uv run python -m pipeline preprocess
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: data/raw/data.csv
      hash: md5
      md5: 33411fa1536aaaadb24c0c1f2a8598b9
      size: 16246860
    - path: pipeline/__init__.py
      hash: md5
      md5: 516d9abddfbef26ec011250ca5cf66aa
      size: 2549
    - path: pipeline/__main__.py
      hash: md5
      md5: 303c04429b51b25a7de341ad8ab5b9f2
      size: 1884
    - path: pipeline/stages/preprocess.py
      hash: md5
      md5: a5273bf8fc0cdd55a5ea529fcefac598
      size: 12400
      isexec: true
    - path: pipeline/stages/stage.py
      hash: md5
      md5: c9cd5ee8a245b4e18bea8fa8cec7da2f
      size: 5110
      isexec: true
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
    outs:
    - path: data/interim/data.parquet
      hash: md5
      md5: ff7f3f24f1d817188240d403e29f217a
      size: 1645476
    - path: metrics/preprocess/metrics.json
      hash: md5
      md5: 27e62d59eafe38f4d7ec0dfe01d002d9
      size: 3727
    - path: plots/preprocess/missing_values.png
      hash: md5
      md5: 4c8d142e220a2e2f5af880977e1c818b
      size: 482959
    - path: plots/preprocess/num_lab_procedures_distribution.png
      hash: md5
      md5: 7101d0cf2927621f95c6bf8ea4ff056a
      size: 165247
    - path: plots/preprocess/num_medications_distribution.png
      hash: md5
      md5: 3df7f73f4f7ce581de883de97fe83074
      size: 136597
    - path: plots/preprocess/num_procedures_distribution.png
      hash: md5
      md5: eace574b7cf56b8223541e9889344a38
      size: 125271
    - path: plots/preprocess/number_diagnoses_distribution.png
      hash: md5
      md5: 31fb1cf22ffb394e65e69eed39b6aff8
      size: 139718
    - path: plots/preprocess/number_emergency_distribution.png
      hash: md5
      md5: f39b28dad47b84c674ef06ee508e3d89
      size: 103253
    - path: plots/preprocess/number_inpatient_distribution.png
      hash: md5
      md5: 5500327f516ed20fd8461ae87f0c681c
      size: 122887
    - path: plots/preprocess/number_outpatient_distribution.png
      hash: md5
      md5: 32b44edb2473a9bbbbaffaf8af34ac50
      size: 98234
    - path: plots/preprocess/readmission_distribution.png
      hash: md5
      md5: 1dd60430625689a2f5dd18cba58075f2
      size: 101605
    - path: plots/preprocess/time_in_hospital_distribution.png
      hash: md5
      md5: fe234f128720013b15615879a868e439
      size: 163603
  featurize:
    cmd:
    - .venv/bin/uv run --with boto3 python -m pipeline featurize
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: data/interim/data.parquet
      hash: md5
      md5: ff7f3f24f1d817188240d403e29f217a
      size: 1645476
    - path: pipeline/__init__.py
      hash: md5
      md5: 516d9abddfbef26ec011250ca5cf66aa
      size: 2549
    - path: pipeline/__main__.py
      hash: md5
      md5: 303c04429b51b25a7de341ad8ab5b9f2
      size: 1884
    - path: pipeline/stages/featurize.py
      hash: md5
      md5: 52561ab15f86fafb234683c67d290e98
      size: 15363
      isexec: true
    - path: pipeline/stages/stage.py
      hash: md5
      md5: c9cd5ee8a245b4e18bea8fa8cec7da2f
      size: 5110
      isexec: true
    outs:
    - path: data/processed/features.parquet
      hash: md5
      md5: 496c907119330ae4232f7b6237fce100
      size: 565552
    - path: data/processed/features_not_onehot.parquet
      hash: md5
      md5: 1b14321b5c868684f9af0b7b6bfd99af
      size: 1808900
    - path: metrics/featurize/metrics.json
      hash: md5
      md5: 4e62c149dbafc52bae3e573ccb565536
      size: 1762
    - path: metrics/featurize/statistics.json
      hash: md5
      md5: dc4d635ee27af87e7630318b246ea4ff
      size: 3145
    - path: plots/featurize/age_distribution.png
      hash: md5
      md5: 7ba1845b28aab194d68a1734868d9c78
      size: 80088
    - path: plots/featurize/age_number_diagnoses_distribution.png
      hash: md5
      md5: 90847ec23dbd6233caf170979598b249
      size: 106624
    - path: plots/featurize/change_num_med_distribution.png
      hash: md5
      md5: e0e6824c03532a90acacc24ecf4d94db
      size: 99656
    - path: plots/featurize/feature_correlations.png
      hash: md5
      md5: 6ae4e2f17b9beaac2597e5eae464fa10
      size: 637990
    - path: plots/featurize/feature_importance.csv
      hash: md5
      md5: 5aabfc05aeab4460ed530e34b19041af
      size: 768
    - path: plots/featurize/feature_importance.png
      hash: md5
      md5: 38bd7b4acf8f49ded9c867936a6018a3
      size: 284359
    - path: plots/featurize/num_change_distribution.png
      hash: md5
      md5: ee76bc16afda769ce91f0b49df6db2a6
      size: 101758
    - path: plots/featurize/num_med_distribution.png
      hash: md5
      md5: f040eba849f41334b26e99bb5a04fcee
      size: 96176
    - path: plots/featurize/num_med_num_change_distribution.png
      hash: md5
      md5: 95d358f3263634dbc3d49d913c86a57d
      size: 113960
    - path: plots/featurize/num_med_num_lab_procedures_distribution.png
      hash: md5
      md5: d2953c3cd71febc88704ae3b494cec49
      size: 120611
    - path: plots/featurize/num_med_num_procedures_distribution.png
      hash: md5
      md5: c45b6bb6d7e0fb537954bb845e5ca0fe
      size: 116805
    - path: plots/featurize/num_med_number_diagnoses_distribution.png
      hash: md5
      md5: 4a40ce1cae2ced93340107fb82fe7941
      size: 121025
    - path: plots/featurize/num_med_time_in_hospital_distribution.png
      hash: md5
      md5: 3c377ca96d5173fcd71326432da96bcd
      size: 113561
    - path: plots/featurize/num_procedures_distribution.png
      hash: md5
      md5: 1fccc43152e4a732a4ec8b762af3b9eb
      size: 137617
    - path: plots/featurize/number_diagnoses_time_in_hospital_distribution.png
      hash: md5
      md5: 532f68b2dbf5ca5a8f0c8d7895721314
      size: 201386
    - path: plots/featurize/readmission_distribution.png
      hash: md5
      md5: 5a039486c695971472accf7e3f7bfbc0
      size: 105169
    - path: plots/featurize/service_utilization_distribution.png
      hash: md5
      md5: 589a97c60d69dddfa258f8d4219c02d3
      size: 136375
    - path: plots/featurize/time_in_hospital_distribution.png
      hash: md5
      md5: de7d88294b0b076b2b3dc2f0072c54e2
      size: 178078
    - path: plots/featurize/time_in_hospital_num_lab_procedures_distribution.png
      hash: md5
      md5: 113506c8ae543872f9b67b89b22a0a64
      size: 176102
  explore:
    cmd:
    - .venv/bin/uv run python -m pipeline explore
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: data/interim/data.parquet
      hash: md5
      md5: ff7f3f24f1d817188240d403e29f217a
      size: 1645476
    - path: pipeline/__init__.py
      hash: md5
      md5: 516d9abddfbef26ec011250ca5cf66aa
      size: 2549
    - path: pipeline/__main__.py
      hash: md5
      md5: 303c04429b51b25a7de341ad8ab5b9f2
      size: 1884
    - path: pipeline/stages/explore.py
      hash: md5
      md5: aeade628e1da0881caecc8b9f7bb28cc
      size: 14770
      isexec: true
    - path: pipeline/stages/stage.py
      hash: md5
      md5: c9cd5ee8a245b4e18bea8fa8cec7da2f
      size: 5110
      isexec: true
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
    outs:
    - path: metrics/explore/metrics.json
      hash: md5
      md5: 99d03995acccb12e8eb6329f0077cabd
      size: 20870
    - path: plots/explore/clinical_metrics_boxplot.png
      hash: md5
      md5: 9e9b0447f3ae95bbc207080eee688534
      size: 157773
    - path: plots/explore/clinical_numeric_correlation_heatmap.png
      hash: md5
      md5: cb941af8be7bd442c189597d7bd55d2f
      size: 255613
    - path: plots/explore/correlation_matrix_heatmap.png
      hash: md5
      md5: 392d7d200ee8394286a5627cb2d6ca7b
      size: 976918
    - path: plots/explore/demographic_numeric_correlation_heatmap.png
      hash: md5
      md5: 774db866d607f3721506c2a37f54b38a
      size: 93301
    - path: plots/explore/demographics_age_distribution.png
      hash: md5
      md5: 50382f0868c84a570820d482aff5a31e
      size: 245647
    - path: plots/explore/diagnosis_numeric_correlation_heatmap.png
      hash: md5
      md5: 1ce7d69b2c5b07768feca0c98e6af479
      size: 336831
    - path: plots/explore/feature_importance.csv
      hash: md5
      md5: 299acbfcf4fe1dacacc456fed62de8f9
      size: 1172
    - path: plots/explore/feature_importance.png
      hash: md5
      md5: 8280a1d973ad75260db9868fc5c76b53
      size: 236499
    - path: plots/explore/lab_results_distribution.png
      hash: md5
      md5: 58f1379aaea28786fedf2ec652627888
      size: 162647
    - path: plots/explore/labs_numeric_correlation_heatmap.png
      hash: md5
      md5: d855c6c37463e62babe15a0cd0d8449f
      size: 100121
    - path: plots/explore/medications_numeric_correlation_heatmap.png
      hash: md5
      md5: 2beae4fae561765b7875a5046f071789
      size: 198632
    - path: plots/explore/race_chi_square.png
      hash: md5
      md5: 7cee99fb8e069971d994f13878bf7fee
      size: 163608
    - path: plots/explore/race_distribution.png
      hash: md5
      md5: 244797e97a7b40f2818cf84712c073b6
      size: 171605
    - path: plots/explore/service_numeric_correlation_heatmap.png
      hash: md5
      md5: a1f316edb26ede92440e4ef64d910542
      size: 139993
    - path: plots/explore/service_utilization_distribution.png
      hash: md5
      md5: 7c51a9beff6debf4e05f96a7b30c7494
      size: 236030
  ingest_parquet:
    cmd: .venv/bin/python src/ingest.py
    deps:
    - path: requirements-frozen.txt
      hash: md5
      md5: 495bf7a4ad0fc161c91a663531b153ca
      size: 8410
    - path: src/ingest.py
      hash: md5
      md5: 4834dee50d39bc8738573b1d25632ce3
      size: 2691
    outs:
    - path: data/raw/data.parquet
      hash: md5
      md5: 70194fd7340a638e7a98b5d5a2a99ed6
      size: 1419892
  ingest_csv:
    cmd: .venv/bin/python src/ingest.py
    deps:
    - path: requirements-frozen.txt
      hash: md5
      md5: 495bf7a4ad0fc161c91a663531b153ca
      size: 8410
    - path: src/ingest.py
      hash: md5
      md5: 4834dee50d39bc8738573b1d25632ce3
      size: 2691
    outs:
    - path: data/raw/data.csv
      hash: md5
      md5: 33411fa1536aaaadb24c0c1f2a8598b9
      size: 16246860
    - path: data/raw/metadata.json
      hash: md5
      md5: eb8bd36c2cc7a6284a657c63561e0225
      size: 5125
    - path: data/raw/variables.json
      hash: md5
      md5: c03764d3560b025c3f1291d585517221
      size: 19001
  ingest:
    cmd:
    - export UV_LINK_MODE=copy && uv venv .venv-ingest --python 3.11
    - . .venv-ingest/bin/activate && export UV_LINK_MODE=copy && uv pip install -q
      -r requirements/base.txt
    - . .venv-ingest/bin/activate && export UV_LINK_MODE=copy && uv pip install -q
      -r requirements/ingest.txt
    - . .venv-ingest/bin/activate && .venv-ingest/bin/python pipeline/stages/pipeline.py
      ingest
    deps:
    - path: pipeline/stages/pipeline.py
      hash: md5
      md5: 490f6c30d803c28caf0b64a7ffc736e0
      size: 29801
    - path: requirements/base.txt
      hash: md5
      md5: 2be83abc64566c11a9a43706e447a135
      size: 96
    - path: requirements/ingest.txt
      hash: md5
      md5: 910eb7c3ae1b69bd49c676e000caff28
      size: 87
    outs:
    - path: data/raw/data.csv
      hash: md5
      md5: 33411fa1536aaaadb24c0c1f2a8598b9
      size: 16246860
    - path: data/raw/data.parquet
      hash: md5
      md5: 715fc5c0f345a1e7efc9136c4c5da15a
      size: 1419892
    - path: data/raw/metadata.json
      hash: md5
      md5: eb8bd36c2cc7a6284a657c63561e0225
      size: 5125
    - path: data/raw/variables.json
      hash: md5
      md5: c03764d3560b025c3f1291d585517221
      size: 19001
  train_logistic_regression:
    cmd: .venv/bin/python models/logistic_regression/model.py
    deps:
    - path: data/interim/data_featured.parquet
      hash: md5
      md5: bcfcb4257ebc5523176cabc88c2278c3
      size: 4971381
    - path: models/logistic_regression/model.py
      hash: md5
      md5: df7d5793fa43b6d64227fb82088ddd52
      size: 18556
    - path: requirements-frozen.txt
      hash: md5
      md5: 495bf7a4ad0fc161c91a663531b153ca
      size: 8410
  train_autogluon:
    cmd:
    - uv venv .venv-autogluon --python 3.10
    - . .venv-autogluon/bin/activate && uv pip install -r requirements-autogluon.txt
    - . .venv-autogluon/bin/activate && uv pip freeze > requirements-autogluon-frozen.txt
    - . .venv-autogluon/bin/activate && python src/utils.py patch_nvidia_gpu
    - . .venv-autogluon/bin/activate && PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python
      python models/autogluon/model.py
    - echo "done" > .markers/train_autogluon.done
    deps:
    - path: .markers/featurize.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: data/interim/data_featured.parquet
      hash: md5
      md5: f508abc6a720c94f159db3c2139edc8d
      size: 5210972
    - path: models/autogluon/model.py
      hash: md5
      md5: 3fa0cdcd5b25b81a3449b7d93bfb0e25
      size: 16487
    - path: requirements-autogluon.txt
      hash: md5
      md5: 2a3814eba1bc90e700e781a357c06ede
      size: 106
    outs:
    - path: .markers/train_autogluon.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: .venv-autogluon
      hash: md5
      md5: 2915eff68d524cad9276ebfdd895e87d.dir
      size: 3861441890
      nfiles: 68274
    - path: models/autogluon/artifacts/metrics/metrics.json
      hash: md5
      md5: 6cedbbb5a3bd24b170f72ce5d12d8b21
      size: 191
    - path: models/autogluon/artifacts/model
      hash: md5
      md5: 39ebe9123168d9caaadccb2f6a01d1f3.dir
      size: 51178
      nfiles: 10
    - path: models/autogluon/artifacts/plots/confusion_matrix.png
      hash: md5
      md5: 42c10c96deee8111d7bc4085a7a688e0
      size: 109307
    - path: models/autogluon/artifacts/plots/feature_importance.png
      hash: md5
      md5: 473d4d6b2c41b1c2748b0da4584f8460
      size: 243218
    - path: models/autogluon/artifacts/plots/roc_curve.png
      hash: md5
      md5: 99fe191ccfdccddaf4eb5c0f0a56c965
      size: 176597
    - path: requirements-autogluon-frozen.txt
      hash: md5
      md5: e25a2283fa294501c4fdf876ff374386
      size: 6053
  train_neural_network:
    cmd: .venv/bin/python models/neural_network/model.py
    deps:
    - path: data/interim/data_featured.parquet
      hash: md5
      md5: bcfcb4257ebc5523176cabc88c2278c3
      size: 4971381
    - path: models/neural_network/model.py
      hash: md5
      md5: e0dab3b3599ff9845ddc32e38cfed965
      size: 20372
    - path: requirements-frozen.txt
      hash: md5
      md5: 495bf7a4ad0fc161c91a663531b153ca
      size: 8410
  train_logisticregression:
    cmd:
    - uv venv .venv-logisticregression --python 3.10
    - . .venv-logisticregression/bin/activate && uv pip install -r requirements-logisticregression.txt
    - . .venv-logisticregression/bin/activate && uv pip freeze > requirements-logisticregression-frozen.txt
    - . .venv-logisticregression/bin/activate && python models/logistic_regression/model.py
    - echo "done" > .markers/train_logisticregression.done
    deps:
    - path: .markers/featurize.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: data/interim/data_featured.parquet
      hash: md5
      md5: f508abc6a720c94f159db3c2139edc8d
      size: 5210972
    - path: models/logistic_regression/model.py
      hash: md5
      md5: 5eea513d8e6f3d9259eaf5b6165b64d5
      size: 17931
    - path: requirements-logisticregression.txt
      hash: md5
      md5: 51f39049342d2ccec98f0f9868bbc68b
      size: 84
    outs:
    - path: .markers/train_logisticregression.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: .venv-logisticregression
      hash: md5
      md5: 39f0ed7ad079450a8f9811f7bec12dbc.dir
      size: 421952179
      nfiles: 18184
    - path: models/logistic_regression/artifacts/metrics/metrics.json
      hash: md5
      md5: f3624ca6827354fb4780c2c9a68943c7
      size: 480
    - path: models/logistic_regression/artifacts/model
      hash: md5
      md5: d3b9cfb88049175b27571e4066330317.dir
      size: 7508
      nfiles: 4
    - path: models/logistic_regression/artifacts/plots/confusion_matrix.png
      hash: md5
      md5: 504baef6eb2985cbb406d6423bdbcbd9
      size: 108136
    - path: models/logistic_regression/artifacts/plots/roc_curve.png
      hash: md5
      md5: b051a4c39f14e5681a1ec01e251aef80
      size: 195054
    - path: requirements-logisticregression-frozen.txt
      hash: md5
      md5: be5c30cefe795fc8ed72d1fdac85a1bf
      size: 3449
  train_neuralnetwork:
    cmd:
    - uv venv .venv-neuralnetwork --python 3.10
    - . .venv-neuralnetwork/bin/activate && uv pip install -r requirements-neuralnetwork.txt
    - . .venv-neuralnetwork/bin/activate && uv pip freeze > requirements-neuralnetwork-frozen.txt
    - . .venv-neuralnetwork/bin/activate && python models/neural_network/model.py
    - echo "done" > .markers/train_neuralnetwork.done
    deps:
    - path: .markers/featurize.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: data/interim/data_featured.parquet
      hash: md5
      md5: f508abc6a720c94f159db3c2139edc8d
      size: 5210972
    - path: models/neural_network/model.py
      hash: md5
      md5: ac075ff4de3e3a3a71e7fb50a2511b3c
      size: 20373
    - path: requirements-neuralnetwork.txt
      hash: md5
      md5: 4df5a9fd8258b79c4c9af987eafd5007
      size: 99
    outs:
    - path: .markers/train_neuralnetwork.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: .venv-neuralnetwork
      hash: md5
      md5: 0266dda7a6777fc216cc5f1c2f512565.dir
      size: 1979320370
      nfiles: 35636
    - path: models/neural_network/artifacts/metrics/metrics.json
      hash: md5
      md5: 7345181225c2969b3d7f43296a6259f1
      size: 756
    - path: models/neural_network/artifacts/model
      hash: md5
      md5: cf5f5f81aae123e5195a08531ebb3339.dir
      size: 131997
      nfiles: 4
    - path: models/neural_network/artifacts/plots/confusion_matrix.png
      hash: md5
      md5: 910f2c4adc742230a05af102dfd8b804
      size: 109270
    - path: models/neural_network/artifacts/plots/model_architecture.png
      hash: md5
      md5: 03cd8da41577c10e36416a2a9c4c9dec
      size: 220369
    - path: models/neural_network/artifacts/plots/roc_curve.png
      hash: md5
      md5: 0b305509f53aa6c199bebe291b57f770
      size: 199723
    - path: requirements-neuralnetwork-frozen.txt
      hash: md5
      md5: b16d8ab17bb28065eee0b78277a1cc97
      size: 3825
  deploy:
    cmd:
    - uv venv .venv-deploy --python 3.10
    - . .venv-deploy/bin/activate && uv pip install -r requirements-deploy.txt
    - . .venv-deploy/bin/activate && uv pip freeze > requirements-deploy-frozen.txt
    - . .venv-deploy/bin/activate && python src/deploy.py
    - echo "done" > .markers/deploy.done
    deps:
    - path: .markers/train_autogluon.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: .markers/train_logisticregression.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: .markers/train_neuralnetwork.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: models/autogluon/artifacts/metrics/metrics.json
      hash: md5
      md5: 6cedbbb5a3bd24b170f72ce5d12d8b21
      size: 191
    - path: models/autogluon/artifacts/model/feature_importance.csv
      hash: md5
      md5: 1b93b41477957f69e27b758b8bb029a4
      size: 4499
    - path: models/autogluon/artifacts/model/predictor.pkl
      hash: md5
      md5: 4ab5049f6ea274bdfcb4657386a6fd74
      size: 498
    - path: models/logistic_regression/artifacts/metrics/metrics.json
      hash: md5
      md5: f3624ca6827354fb4780c2c9a68943c7
      size: 480
    - path: models/logistic_regression/artifacts/model/model.joblib
      hash: md5
      md5: f33f24d5505d2b3409e5f6d235cdf246
      size: 1631
    - path: models/neural_network/artifacts/metrics/metrics.json
      hash: md5
      md5: 7345181225c2969b3d7f43296a6259f1
      size: 756
    - path: models/neural_network/artifacts/model/model.keras
      hash: md5
      md5: dbebfc74bc94ff7776c4ab645dc1610a
      size: 122759
    - path: src/deploy.py
      hash: md5
      md5: 6c63a3fe9d32237a68c7270cf4113f48
      size: 23333
    outs:
    - path: .markers/deploy.done
      hash: md5
      md5: 678e5e019a79526d0fcca5e29f6e5f78
      size: 5
    - path: huggingface/models/diabetes-readmission
      hash: md5
      md5: 023b04defd929b51c240902cfb8ae7d0.dir
      size: 1631549
      nfiles: 38
    - path: requirements-deploy-frozen.txt
      hash: md5
      md5: 67e6872012e8def4945da48dfe1198f8
      size: 3598
  build:
    cmd:
    - export UV_LINK_MODE=copy && uv venv .venv-build --python 3.11
    - . .venv-build/bin/activate && export UV_LINK_MODE=copy && uv pip install -r
      requirements/base.txt
    - . .venv-build/bin/activate && export UV_LINK_MODE=copy && uv pip install -r
      requirements/build.txt
    - . .venv-build/bin/activate && python pipeline/stages/build.py
    deps:
    - path: docker/Dockerfile.autogluon
      hash: md5
      md5: 2ed86a39d0b0c1a490830fd855577e99
      size: 481
    - path: docker/Dockerfile.base
      hash: md5
      md5: 0c134b528118d36c4f34272364755f71
      size: 1634
    - path: docker/Dockerfile.deploy
      hash: md5
      md5: 56b6458b8e30cc229d82ec5f8b03eeb7
      size: 424
    - path: docker/Dockerfile.evaluate
      hash: md5
      md5: 538fc2af111021fb283261e92859b490
      size: 385
    - path: docker/Dockerfile.explore
      hash: md5
      md5: de6e8fbabd6477cd46776711d0cf73a0
      size: 378
    - path: docker/Dockerfile.featurize
      hash: md5
      md5: 3138e972ac108d3184090a013fd4c165
      size: 396
    - path: docker/Dockerfile.infrastruct
      hash: md5
      md5: 2d3d2670983afc3523cf452cda5c185e
      size: 323
    - path: docker/Dockerfile.ingest
      hash: md5
      md5: 2d15b5c7c668e4507dc3d61cfe69aef7
      size: 436
    - path: docker/Dockerfile.logisticregression
      hash: md5
      md5: fe117de244698551e90a444a57dc6bd5
      size: 376
    - path: docker/Dockerfile.neuralnetwork
      hash: md5
      md5: 078f56f5566dd13c5dcc226944fc9bcb
      size: 378
    - path: docker/Dockerfile.optimize
      hash: md5
      md5: 50dfbf51cd932cc9c7a94fbbe68277f9
      size: 441
    - path: docker/Dockerfile.preprocess
      hash: md5
      md5: 61c0949d86dd84d37586b0a6b8679dac
      size: 448
    - path: docker/Dockerfile.register
      hash: md5
      md5: 8005d4554d9164eb2a52ff8210221a27
      size: 346
    - path: docker/Dockerfile.serve
      hash: md5
      md5: dd4a523f7f26d415e4e3db1afeedeb16
      size: 453
    - path: pipeline/conf/config.yaml
      hash: md5
      md5: c1ffe24f384c66a699a55e5861bb3a98
      size: 27932
    - path: pipeline/stages/build.py
      hash: md5
      md5: b70d97c1bceb3a5371500403cb5937af
      size: 8061
      isexec: true
    - path: requirements/base.txt
      hash: md5
      md5: 7808903344d4b446fea79d71e4547c58
      size: 83
    - path: requirements/build.txt
      hash: md5
      md5: 05b6053c41a2130afd6fc3b158bda4e6
      size: 6
  prepare:
    cmd:
    - .venv/bin/uv run --with boto3 python -m pipeline infrastruct
    - .venv/bin/uv run --with ucimlrepo --with pyarrow python -m pipeline ingest
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: pipeline/__init__.py
      hash: md5
      md5: 516d9abddfbef26ec011250ca5cf66aa
      size: 2549
    - path: pipeline/__main__.py
      hash: md5
      md5: 303c04429b51b25a7de341ad8ab5b9f2
      size: 1884
    - path: pipeline/stages/infrastruct.py
      hash: md5
      md5: 13b3c73e3a0f8036706032021b1b5ccf
      size: 1480
      isexec: true
    - path: pipeline/stages/ingest.py
      hash: md5
      md5: 2019d8008d88422b8a26c94cf4082e46
      size: 3702
      isexec: true
    - path: pipeline/stages/stage.py
      hash: md5
      md5: c9cd5ee8a245b4e18bea8fa8cec7da2f
      size: 5110
      isexec: true
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
    outs:
    - path: data/raw/data.csv
      hash: md5
      md5: 33411fa1536aaaadb24c0c1f2a8598b9
      size: 16246860
    - path: data/raw/data.parquet
      hash: md5
      md5: 80180ca21b2e0a18573675cdb3f741de
      size: 1415409
    - path: data/raw/metadata.json
      hash: md5
      md5: c8df8414d7743e8e95d42b91ef1402d3
      size: 4903
    - path: data/raw/variables.json
      hash: md5
      md5: af3722d3a8b6db1015406123b06cd79d
      size: 17401
    - path: metrics/ingest/metrics.json
      hash: md5
      md5: 18cff89728e8c9b044f9e1b1721edaa8
      size: 4599
    - path: plots/ingest/data_types.png
      hash: md5
      md5: c767b14c51d357e53b74bbb23d951f22
      size: 77824
    - path: plots/ingest/missing_values.png
      hash: md5
      md5: 28de93a4a968520fc11e31b6c1adae7d
      size: 303104
  feast:
    cmd:
    - docker stop $(docker ps -a -q --filter publish=5432)  &>/dev/null || true
    - .venv/bin/uv run --with psycopg2-binary --with feast[postgres] --with dask[dataframe]
      python -m pipeline feast
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: data/processed/features.parquet
      hash: md5
      md5: 496c907119330ae4232f7b6237fce100
      size: 565552
    - path: data/processed/features_not_onehot.parquet
      hash: md5
      md5: 1b14321b5c868684f9af0b7b6bfd99af
      size: 1808900
    - path: pipeline/stages/feast.py
      hash: md5
      md5: 9950e243bd9db7f438c2bfc5044121fa
      size: 27648
    - path: pipeline/stages/feature_repo.py
      hash: md5
      md5: 0ee45083bccebac63499c02f925e763d
      size: 6523
    - path: pipeline/stages/stage.py
      hash: md5
      md5: c9cd5ee8a245b4e18bea8fa8cec7da2f
      size: 5110
      isexec: true
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
  autogluon:
    cmd:
    - .venv/bin/uv run --with autogluon.tabular[lightgbm] --with dvclive python pipeline
      autogluon
    deps:
    - path: .venv
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: data/processed/features.parquet
      hash: md5
      md5: 496c907119330ae4232f7b6237fce100
      size: 565552
    - path: pipeline/__init__.py
      hash: md5
      md5: f321818f173e8f62b49da0f746eed582
      size: 273
    - path: pipeline/__main__.py
      hash: md5
      md5: ca86d1d756b43370d3f001ab69dd9cb4
      size: 1374
    - path: pipeline/stages/autogluon.py
      hash: md5
      md5: 5b8897a79ed52d478811671d7dbfccee
      size: 8773
    - path: pipeline/stages/base.py
      hash: md5
      md5: 28da6be2a311d6c4e85c7b51f28e7f79
      size: 9673
      isexec: true
    - path: requirements/base.txt
      hash: md5
      md5: 5050f4f60d20602fe4410bcb29394c32
      size: 132
    outs:
    - path: metrics/autogluon/feature_importance.csv
      hash: md5
      md5: 0d56db6b6dba9ee15d17ac0b5db906f4
      size: 3149
    - path: metrics/autogluon/metrics.json
      hash: md5
      md5: 02a755ac5b78c30ece90f893b6be05a9
      size: 164
    - path: models/autogluon
      hash: md5
      md5: b28cb836aa009bfedd78d37ef2dd7a11.dir
      size: 8871448
      nfiles: 14
    - path: plots/autogluon/confusion_matrix.png
      hash: md5
      md5: e6c02006c0cda5f4d878ebe2c499a02f
      size: 82840
    - path: plots/autogluon/feature_importance.png
      hash: md5
      md5: 85b52e1ae0b1e20359a4486ed9cfa80c
      size: 209782
    - path: plots/autogluon/roc_curve.png
      hash: md5
      md5: 32d2a6ddc62ad33f1643735df29858b2
      size: 101527
