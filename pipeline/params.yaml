project: diabetes_readmission
version: 0.1.0
seed: 42

paths:
  raw: data/raw
  interim: data/interim
  processed: data/processed
  feature_repo: feature_repo
  metrics: metrics
  plots: plots
  models: models

aws:
  bucket_name: aai540-group3
  region: us-east-1

feast:
  stop_container: false
  config:
    project: diabetes_readmission
    provider: local
    registry:
      registry_type: sql
      path: postgresql+psycopg://feast:feast@localhost:5432/feast
      cache_ttl_seconds: 600
      sqlalchemy_config_kwargs:
        echo: false
        pool_pre_ping: true
    offline_store:
      type: postgres
      host: localhost
      port: 5432
      database: feast
      db_schema: public
      user: feast
      password: feast
    online_store:
      type: postgres
      host: localhost
      port: 5432
      database: feast
      db_schema: feature_store
      user: feast
      password: feast
    entity_key_serialization_version: 2
    coerce_tz_aware: true

dataset:
  name: "Diabetes 130-US Hospitals for Years 1999-2008"
  id: 296
  source: ucimlrepo
  timestamp: "1999-01-01T00:00:00Z"
  splits:
    train: 0.80
    test: 0.10
    val: 0.10

models:
  base:
    mode: quick
    label: readmitted
    metric: roc_auc
    problem_type: binary

  autogluon:
    quick:
      time_limit: 60
      presets: medium_quality
      hyperparameters:
        GBM:
          extra_trees: false
          learning_rate: 0.1
          num_boost_round: 100
          num_leaves: 16
          early_stopping_rounds: 10
    full:
      time_limit: 7200
      presets: best_quality
      hyperparameters:
        GBM:
          extra_trees: true
          learning_rate: 0.05
          num_boost_round: 500
          num_leaves: 128
          feature_fraction: 0.8
          min_data_in_leaf: 20
        CAT:
          iterations: 1000
          depth: 8
          learning_rate: 0.05
          min_data_in_leaf: 20
        XGB:
          max_depth: 8
          learning_rate: 0.05
          n_estimators: 500
          subsample: 0.8
          colsample_bytree: 0.8
        NN_TORCH:
          num_epochs: 100
          learning_rate: 0.001
          dropout_prob: 0.1
          weight_decay: 0.01
          batch_size: 512
          layers: [200, 100]

  logistic:
    quick:
      optimize: true
      max_iter: 100
      solver: lbfgs
      hyperparameters:
        C: 1.0
        penalty: l2
        n_trials: 10
        timeout: 600
        direction: maximize
        param_space:
          C:
            type: float
            low: 0.1
            high: 1.0
            log: true
          penalty:
            type: categorical
            choices: [l2]

    full:
      optimize: true
      max_iter: 1000
      solver: saga
      hyperparameters:
        C: 0.1
        penalty: l2
        n_trials: 50
        timeout: 3600
        direction: maximize
        tol: 1e-4
        class_weight: balanced
        param_space:
          C:
            type: float
            low: 0.01
            high: 10.0
            log: true
          penalty:
            type: categorical
            choices: [l1, l2]
          solver:
            type: categorical
            choices: [liblinear, saga]

#-----------------------------------------------------------------------------#
# Visualization settings
#-----------------------------------------------------------------------------#
visualization:
  style: "seaborn-v0_8-white"
  palette: "viridis"
  theme:
    style: "white"
    context: "paper"
    font_scale: 1.6
    rc:
      # Core settings
      figure.dpi: 300
      savefig.dpi: 300
      figure.figsize: [10, 6.18] # Golden ratio
      figure.facecolor: "white"
      figure.autolayout: true
      # Typography
      font.family: ["Fira Sans", "Helvetica Neue", "Arial", "sans-serif"]
      axes.labelsize: 13
      axes.titlesize: 15
      axes.labelweight: "regular"
      xtick.labelsize: 11
      ytick.labelsize: 11
      # Axes Styling
      axes.spines.top: false
      axes.spines.right: false
      axes.spines.left: true
      axes.spines.bottom: true
      axes.linewidth: 0.8
      axes.axisbelow: true
      # Grid styling
      grid.linestyle: ":"
      grid.alpha: 0.15
      grid.color: "#666666"
      # Legend Styling
      legend.fontsize: 11
      legend.frameon: false
      legend.borderaxespad: 0.5
      # Colors
      axes.prop_cycle.color:
        [
          "#0077BB",
          "#EE7733",
          "#009988",
          "#EE3377",
          "#CC3311",
          "#33BBEE",
          "#BB5566",
        ]

plots:
  confusion_matrix:
    title: "Confusion Matrix"
    x: "Predicted"
    y: "Actual"
    template: "confusion"
  roc_curve:
    title: "ROC Curve"
    x: "FPR"
    y: "TPR"
  feature_importance:
    title: "Top 20 Features by Importance"
    x: "importance"
    y: "feature"
