stages:
  ingest:
    cmd: python src/data/ingestion.py
    deps:
      - src/data/ingestion.py
    outs:
      - data/raw/:
          remote: datasets_remote

  clean:
    cmd: python src/data/cleaning.py
    deps:
      - src/data/cleaning.py
      - data/raw/
    outs:
      - data/interim/:
          remote: datasets_remote

  split:
    cmd: python src/data/splitting.py
    deps:
      - src/data/splitting.py
      - data/interim/data.csv
    outs:
      - data/processed/train.csv:
          remote: datasets_remote
      - data/processed/test.csv:
          remote: datasets_remote

  train:
    cmd: python src/models/model1/train.py
    deps:
      - src/models/model1/train.py
      - data/processed/train.csv
    outs:
      - models/trained_model.joblib:
          remote: models_remote
    live:
      dvclive:
        summary: true
        html: true

  evaluate:
    cmd: python src/visualization/evaluation.py
    deps:
      - src/visualization/evaluation.py
      - models/trained_model.joblib
      - data/processed/test.csv
    live:
      dvclive:
        summary: true
        html: true

metrics:
  - dvclive/metrics.json
plots:
  - dvclive/plots/metrics:
      x: step
